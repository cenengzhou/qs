<div class="m-t-10 m-l-20 m-r-20">
	<!-- begin breadcrumb -->
	<ol class="breadcrumb pull-right">
		<li><a ui-sref="job.dashboard"><i class="fa fa-home"></i>
				Home</a></li>
		<li class="active">Reports</li>
	</ol>
	<!-- end breadcrumb -->
	
	<div class="clearfix"></div>
	<div class="row" vertilize-container ng-repeat="i in repeatRange(reports.length, reportPerRow)">
		<div class="col-md-{{12/reportPerRow}}" ng-repeat="report in reports
		.slice( $index * reportPerRow, $index * reportPerRow + reportPerRow)
		| orderBy:'id'" block-ui="block{{report.name}}">
			<div class="panel panel-info" vertilize>
				<div class="panel-heading">
					<span class="fa fa-2x fa-file-text"></span> 
					<span class="panel-title">{{report.title}}</span>
					<span ng-if="report.comingSoon === 'YES'" class="badge bg-lime-light text-white"> </br>Coming soon!</span>
				</div>
				<div class="panel-body" style="overflow: visible">
					<form id="{{report.name}}Form" name="{{report.name}}Form" ng-submit="false">
						<div>
							<div ng-repeat="searchField in report.searchFields">
								<div style="padding-bottom:10px">
									<div>
										<label for="{{report.name}}{{searchField.field}}">{{searchField.label}}</label>
									
										<div ng-if="searchField.inputType === 'text'" class="form-group has-feedback">
											<input 	type="text" 
													class="form-control form-control-success"
													ng-init="searchField.value = searchField.defaultValue != null ? searchField.defaultValue : ''"
													pattern="{{searchField.validatePattern}}" 
													title="{{searchField.validateMessage != null ? searchField.validateMessage : ''}}" 
													ng-model-options="{ updateOn: 'blur' }" 
													class="form-control" 
													id="{{report.name}}{{searchField.field}}" 
													name="{{report.name}}{{searchField.field}}" 
													ng-model="searchField.value">
											
											<span 	class="fa fa-check has-success form-control-feedback text-success" 
													ng-show="{{report.name}}Form.{{report.name}}{{searchField.field}}.$valid && {{report.name}}Form.{{report.name}}{{searchField.field}}.$touched"></span>
										<span 		class="fa fa-times has-danger form-control-feedback text-danger" 
													ng-show="{{report.name}}Form.{{report.name}}{{searchField.field}}.$invalid && {{report.name}}Form.{{report.name}}{{searchField.field}}.$touched"></span>
										</div>
									
										<input ng-if="searchField.inputType === 'dueDateType'" ng-init="searchField.value = true"
												type="checkbox" data-ios-toggle="toggle" 
												id="{{report.name}}{{searchField.field}}" data-style="ios" data-onstyle="primary"
												data-offstyle="warning" data-on="On or Before" data-width="100%"
												data-off="Exact Date" ng-model="searchField.value">
									
										<div 	ng-if="searchField.inputType === 'dueDate'" ng-init="searchField.value = today" 
												class="input-group" moment-picker="searchField.value"
												format="{{GlobalParameter.MOMENT_DATE_FORMAT}}" start-view="month" today="true">
											<span 	class="input-group-addon"><i class="fa fa-calendar"></i></span> 
											<input	class="form-control" id="{{report.name}}{{searchField.field}}" 
													name="{{report.name}}{{searchField.field}}" required
													ng-model="searchField.value" 
													pattern="{{GlobalParameter.MOMENT_DATE_REGEX}}" 
													title="{{searchField.validateMessage}}" 
													ng-model-options="{ updateOn: 'blur' }">
										</div>
									</div>
									
									<div ng-if="searchField.inputType === 'periods'" ng-init="searchField.value = true">
									<input 
									type="checkbox" data-ios-toggle="toggle" 
									id="{{report.name}}{{searchField.field}}" data-style="ios" data-onstyle="primary"
									data-offstyle="warning" data-on="As of Today" data-width="100%"
									data-off="Month End History" ng-model="searchField.value">
									
										<div ng-if="!searchField.value" ng-init="searchField.monthEndHistory = lastMonth"
										class="input-group" moment-picker="searchField.monthEndHistory"
										format="YYYY-MM" start-view="year" today="true"
										style="padding-top:10px">
											<span class="input-group-addon"><i class="fa fa-calendar"></i></span> 
											<input class="form-control" id="{{report.name}}{{searchField.field}}" 
											name="{{report.name}}{{searchField.field}}" required
											ng-model="searchField.monthEndHistory" 
											ng-model-options="{ updateOn: 'blur' }">
										</div>
										
									</div>
									
									<div ng-if="searchField.inputType === 'autocomplete'">
										<md-autocomplete
										    md-selected-item="searchField.selectedItem"
										    md-search-text-change="searchField.searchTextChange(searchField.value)"
										    md-search-text="searchField.value"
										    md-selected-item-change="searchField.selectedItemChange(item)"
										    md-items="item in searchField.querySearch(searchField.value, searchField.autoCompleteList)"
										    md-item-text="item.display"
										    md-min-length="0"
										    md-select-on-match="true"
										    md-menu-class="{{searchField.mdMenuClass}}"
										    placeholder="">
										  <md-item-template>
										    <span md-highlight-text="searchField.value" md-highlight-flags="^i">{{item.display}}</span>
										  </md-item-template>
										  <md-not-found>
										    No matching code "{{searchField.value}}" were found.
										  </md-not-found>
										</md-autocomplete>
									</div>
									
									<div ng-if="searchField.inputType === 'company'">
										<select  class="form-control" ng-options="company.value as company.display for company in companies" ng-model="searchField.value">
											<option></option>
										</select>
									</div>
									
									<div ng-if="searchField.inputType === 'division'">
										<select class="form-control" ng-options="division.value as division.display for division in divisions" ng-model="searchField.value">
											<option></option>
										</select>
									</div>
									
									<p ng-if="jobAll && searchField.field == 'jobNumber'" >
									Enter <span class="red">*</span> to for search all jobs</p>
									
									<p ng-show="{{report.name}}Form.{{report.name}}{{searchField.field}}.$invalid 
									&& {{report.name}}Form.{{report.name}}{{searchField.field}}.$touched" class="red">
									{{searchField.validateMessage}}</p>
								</div>
							</div>
							<div> 
								<label class="col-form-label">Available to download in</label>
								<button
								ng-repeat="url in report.reportUrls" class="btn btn-block btn-rounded m-b-5" 
								ng-class="{'btn-danger': url.type === 'pdf', 'btn-success': url.type === 'xls'}" 
								ng-click="onDownloadReport(report, url)"
								style="margin-right:10px">
								
								<div ng-switch on="url.type">
									<div ng-switch-when= 'pdf'><i class="fa fa-file-pdf-o"></i> PDF</div>
									<div ng-switch-when='xls'><i class="fa fa-file-excel-o"></i> Excel</div>
								</div>
								</button>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>

