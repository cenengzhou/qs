<div class="m-t-20 m-l-20 m-r-20">
	<div class="col-md-9">
		<h1 class="page-header">
			{{jobNo}}<small> {{jobDescription}}</small>
		</h1>
	</div>

	<div class="col-md-3">
		<ol class="breadcrumb pull-right">
			<li><a ui-sref="job.dashboard"><i class="fa fa-home"></i>
					Home</a></li>
					<li><a ui-sref="cert-dashboard"><i class="fa fa-dashboard"></i>
					Main Cert Dashboard </a></li>
		</ol>
	</div>

	<div class="col-xs-12 col-md-12 col-lg-5">

		<div class="widget widget-stat text-white bg-purple">
			<div class="widget-stat-btn">
				<a href="javascript:;" data-click="widget-reload"><i
					class="fa fa-repeat"></i></a>
			</div>
			<div class="widget-stat-content">
				<div class="widget-stat-title">
					<h4><i class="fa fa-trophy fa-fw"></i> Total Posted Main Contract Certificate Amount</h4>
				</div>
				<div class="widget-stat-text m-b-10">
					
				</div>
				<div class="widget-stat-number m-b-10">{{totalCertificateAmount | currency}}</div>
				<div class="widget-stat-chart">
					<div id="sparkline-line-chart"></div>
				</div>
			</div>
		</div>

		<div class="fullcalendar vertical-box ">
			<div class="fullcalendar-container vertical-box-column">
				<div id='calendar'></div>
			</div>
		</div>
	</div>


	<div class="col-xs-12 col-md-12 col-lg-7">
		<div class="fixed-container">
			<div class="col-lg-12"
				ng-show="latestCertStatus=='300' || latestCertStatus==''">
				<a ui-sref="cert-details({mainCertNo: '0'})" 
					class="btn btn-danger btn-block"> <i
					class="fa fa-plus-circle fa-2x "></i> Create New Payment
				</a> <br> <br>
			</div>
			<div class="col-lg-12 animated fadeInUp"
				ng-repeat="cert in maincerts | orderBy:'certificateNumber':true">

				<div class="panel"	ng-class="{'panel-grey' : cert.certificateStatus=='300', 'panel-purple' : cert.certificateStatus!='300'}">
					<div class="panel-heading">
						<div class="panel-heading-btn">
							<a href="javascript:;"
								class="btn btn-xs btn-icon btn-circle btn-inverse"
								data-click="panel-collapse"> <i class="fa fa-minus"></i>
							</a>
						</div>
						<h3 class="panel-title">Main Contract Certificate No. {{cert.certificateNumber}} - Posting Amount {{cert.postingAmount | currency}}
						</h3>
					</div>
					<!-- /.box-header -->
					<div class="panel-body"
						ng-style="{display: (cert.certificateNumber != maxCertNo ? 'none' : 'block')}">

						<div class="row">
							<div class="col-lg-12">
								<div class="m-b-md pull-right">
									<a class="btn" ui-sref="cert-details({mainCertNo: cert.certificateNumber})" 
									ng-class="{'btn-grey' : cert.certificateStatus=='300', 'btn-purple' : cert.certificateStatus!='300'}">
									View details</a>
									<label class="btn btn-grey" ng-if="cert.arDocNumber != 0" ng-click="showReceiptHistory(cert.arDocNumber)">
									Receivable Status</label>
								</div>
								<dl class="dl-horizontal md-4">
									<dt>Certificate Status:</dt>
									<dd>
										<div ng-class="{'text-black' : cert.certificateStatus=='300', 'text-purple' : cert.certificateStatus!='300'}">
											<b>{{convertCertStatus(cert.certificateStatus)}}</b>
										</div>
									</dd>
									<dt>Client Certificate No.:</dt>
									<dd>{{cert.clientCertNo}}</dd>
								</dl>
							</div>
						</div>
						
						<div class="row">
							<div class="col-xs-12 col-md-12 col-lg-5">
								<dl class="dl-horizontal">
									<dt>IPA Net Amount:</dt>
									<dd>{{cert.appNetAmount | currency}}
									</dd>
									<dt>IPA Gross Amount:</dt>
									<dd>{{cert.appGrossAmount | currency}}
									</dd>
									<dt ng-show = "jobNo.indexOf('14')>-1">GST Receivable:</dt><!-- GST Amount (GST Receivable) -->
									<dd ng-show = "jobNo.indexOf('14')>-1">{{cert.gstReceivable | currency}}</dd>
									<dt ng-show = "jobNo.indexOf('14')>-1">GST Payable:</dt><!-- GST for Contra Charge(GST Payable) -->
									<dd ng-show = "jobNo.indexOf('14')>-1">{{cert.gstPayable | currency}}</dd>
								</dl>
							</div>
							<div class="col-xs-12 col-md-12 col-lg-7">
								<dl class="dl-horizontal">
									<dt>IPC Net Amount:</dt>
									<dd>{{cert.certNetAmount | currency}}
									</dd>
									<dt>IPC Gross Amount:</dt>
									<dd>{{cert.certGrossAmount | currency}}
									</dd>
									<dt ng-show = "jobNo.indexOf('14')>-1">Net GST Receivable:</dt>
									<dd ng-show = "jobNo.indexOf('14')>-1">{{cert.netGSTReceivable | currency}}</dd>
									<dt ng-show = "jobNo.indexOf('14')>-1">Net GST Payable:</dt>
									<dd ng-show = "jobNo.indexOf('14')>-1">{{cert.netGSTPayable | currency}}</dd>
								</dl>
							</div>
							
						</div>
						
						<div class="row">
							<div class="col-xs-12 col-md-12 col-lg-5">
								<dl class="dl-horizontal">
									<dt>IPA Submission Date:</dt>
									<dd>{{cert.ipaSubmissionDate | jsonDate : 'dd MMM,yyyy'}}</dd>
									<dt>Certificate Due Date:</dt>
									<dd>{{cert.certDueDate | jsonDate : 'dd MMM,yyyy'}}</dd>
									<dt>Actual Receipt Date:</dt>
									<dd>{{cert.actualReceiptDate | jsonDate : 'dd MMM,yyyy'}}</dd>
									
								</dl>
							</div>
							<div class="col-xs-12 col-md-12 col-lg-7">
								<dl class="dl-horizontal">
									<dt>Certificate As At Date:</dt>
									<dd>{{cert.certAsAtDate | jsonDate : 'dd MMM,yyyy'}}</dd>
									<dt>Cert Issue Date:</dt>
									<dd>{{cert.certIssueDate | jsonDate : 'dd MMM,yyyy'}}</dd>
									<dt>Prepared by:</dt>
									<dd>{{cert.lastModifiedUser}}</dd>
								</dl>
							</div>
						</div>
						
						<div class="row">
							<div class="col-xs-12 col-md-12 col-lg-12">
								<dl class="dl-horizontal">
									<dt>Remark:</dt>
									<dd>{{cert.remark}}</dd>
								</dl>
							</div>
						</div>
						
						<div class="row">
							<div class="col-lg-12">
								<dl class="dl-horizontal">
									<dt>Completed:</dt>
									<dd>
										<div class="progress progress-striped  m-b-sm"
										ng-class="{'active' : cert.certificateStatus!='300'}">
											<div class="progress-bar" 
												ng-style="{width: progress_bar(cert.certificateStatus)}"
												ng-class="{'progress-bar-grey' : cert.certificateStatus=='300', 'progress-bar-purple' : cert.certificateStatus!='300'}">
											{{progress_bar(cert.certificateStatus)}}</div>
										</div>
									</dd>
								</dl>
							</div>
						</div>
					</div>


				</div>

			</div>

		</div>
	</div>




</div>

<!-- /.content -->