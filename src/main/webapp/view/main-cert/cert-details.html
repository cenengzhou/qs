<div class="content">
	<!-- <h1 class="page-header">
		{{jobNo}}<small> {{jobDescription}}</small>
	</h1> -->

	<form name="form-validate" id="form-validate"
		class="ng-pristine ng-valid">
		<div class="row">
			<div class="stepwizard">
				<div class="stepwizard-row">
					<div class="liner"></div>
					<div class="stepwizard-step">
						<button class="btn icon-btn btn-primary" ng-click="insertIPA()"
							ng-disabled="disableButtons || cert.certificateStatus !=100">
							<span
								class="glyphicon btn-glyphicon glyphicon-open img-circle text-primary"></span>Send
							out IPA
						</button>
						<!-- <p>
						<small class="text-muted"><i
							class="glyphicon glyphicon-info-sign"></i> Status <strong>120</strong></small>
					</p> -->
					</div>
					<div class="stepwizard-step">
						<button class="btn icon-btn btn-primary" ng-click="confirmIPC()"
							ng-disabled="disableButtons || cert.certificateStatus !=120">
							<span
								class="glyphicon btn-glyphicon glyphicon-ok img-circle text-primary"></span>Confirm
							IPC
						</button>
					</div>
					<div class="stepwizard-step">
						<button class="btn icon-btn btn-primary" ng-click="resetIPC()"
							ng-disabled="disableButtons || cert.certificateStatus !=150">
							<span
								class="glyphicon btn-glyphicon glyphicon-refresh img-circle text-primary"></span>Reset
							IPC
						</button>
					</div>
					<div class="stepwizard-step">
						<button class="btn icon-btn btn-primary" ng-click="postIPC()"
							ng-disabled="disableButtons || cert.certificateStatus !=150">
							<span
								class="glyphicon btn-glyphicon glyphicon-saved img-circle text-primary"></span>Post
							IPC
						</button>
					</div>
				</div>
			</div>

			<div class="m-t-15">
				<div class="col-lg-3 col-xs-12">
					<div class="widget widget-stat bg-success text-white">
						<div class="widget-stat-icon">
							<i class="fa fa-file"></i>
						</div>
						<div class="widget-stat-info">
							<div class="widget-stat-title">IPA Net Amount</div>
							<!-- <div class="widget-stat-number">{{cert.appNetAmount |
							currency}}</div> -->
							<div class="widget-stat-number">
								{{cert.appliedMainContractorAmount 
								+ cert.appliedNSCNDSCAmount 
								+ cert.appliedMOSAmount 
								+ cert.appliedMainContractorRetentionReleased 
								+ cert.appliedRetentionforNSCNDSCReleased 
								+ cert.appliedMOSRetentionReleased 
								+ cert.appliedAdvancePayment 
								+ cert.appliedAdjustmentAmount 
								+ cert.appliedCPFAmount 
								- cert.appliedMainContractorRetention 
								- cert.appliedRetentionforNSCNDSC 
								- cert.appliedMOSRetention 
								- cert.appliedContraChargeAmount | currency}}</div>
						</div>
					</div>
				</div>
				<div class="col-lg-3 col-xs-12">
					<div class="widget widget-stat bg-success text-white">
						<div class="widget-stat-icon">
							<i class="fa fa-file"></i>
						</div>
						<div class="widget-stat-info">
							<div class="widget-stat-title">IPA Gross Amount</div>
							<div class="widget-stat-number">
								{{cert.appliedMainContractorAmount 
								+ cert.appliedNSCNDSCAmount 
								+ cert.appliedMOSAmount 
								+ cert.appliedAdvancePayment 
								+ cert.appliedAdjustmentAmount 
								+ cert.appliedCPFAmount |
								currency}}</div>
							<!-- <div class="widget-stat-number">{{cert.appGrossAmount |
							currency}}</div> -->
						</div>
					</div>
				</div>
				<div class="col-lg-3 col-xs-12">
					<div class="widget widget-stat bg-purple text-white">
						<div class="widget-stat-icon">
							<i class="fa fa-bookmark"></i>
						</div>
						<div class="widget-stat-info">
							<div class="widget-stat-title">IPC Net Amount</div>
							<div class="widget-stat-number">
								{{(cert.certifiedMainContractorAmount 
								+ cert.certifiedNSCNDSCAmount 
								+ cert.certifiedMOSAmount 
								+ cert.certifiedMainContractorRetentionReleased 
								+ cert.certifiedRetentionforNSCNDSCReleased 
								+ cert.certifiedMOSRetentionReleased 
								+ cert.certifiedAdvancePayment 
								+ cert.certifiedAdjustmentAmount 
								+ cert.certifiedCPFAmount 
								- cert.certifiedMainContractorRetention 
								- cert.certifiedRetentionforNSCNDSC 
								- cert.certifiedMOSRetention 
								- cert.certifiedContraChargeAmount) | currency}}</div>
							<!-- <div class="widget-stat-number">{{cert.certNetAmount |
							currency}}</div> -->
						</div>
					</div>
				</div>
				<div class="col-lg-3 col-xs-12">
					<div class="widget widget-stat bg-purple text-white">
						<div class="widget-stat-icon">
							<i class="fa fa-bookmark"></i>
						</div>
						<div class="widget-stat-info">
							<div class="widget-stat-title">IPC Gross Amount</div>
							<div class="widget-stat-number">
								{{cert.certifiedMainContractorAmount 
								+ cert.certifiedNSCNDSCAmount 
								+ cert.certifiedMOSAmount 
								+ cert.certifiedAdvancePayment 
								+ cert.certifiedAdjustmentAmount 
								+ cert.certifiedCPFAmount | currency}}</div>
							<!-- <div class="widget-stat-number">{{cert.certGrossAmount |
							currency}}</div> -->
						</div>
					</div>
				</div>
			</div>

			<!-- Certificate Info -->
			<div class="col-md-12">
				<div class="panel panel-inverse ">
					<div class="panel-heading">
						<div class="panel-heading-btn">
							<a href="javascript:;"
								class="btn btn-xs btn-icon btn-circle btn-white"
								data-click="panel-expand"><i class="fa fa-expand"></i> </a> <a
								href="javascript:;"
								class="btn btn-xs btn-icon btn-circle btn-white"
								data-click="panel-collapse"><i class="fa fa-minus"></i> </a>
						</div>
						<div class="panel-title">
							<b>Certificate No.: {{cert.certificateNumber}}</b> 
							<label class="m-l-10"><b>Client Cert No.:</b></label> 
							<label class="m-l-10" ng-show="disableButtons"><b>{{cert.clientCertNo}}</b></label>
							<input type="text" 
								class=" input-sm  text-black text-right"
								ng-model="cert.clientCertNo" ng-hide="disableButtons">
							<label class="m-l-10">
								<b>Posting Amount
								   {{postingAmount = (cert.certifiedMainContractorAmount 
									+ cert.certifiedNSCNDSCAmount 
									+ cert.certifiedMOSAmount 
									+ cert.certifiedMainContractorRetentionReleased 
									+ cert.certifiedRetentionforNSCNDSCReleased 
									+ cert.certifiedMOSRetentionReleased 
									+ cert.certifiedAdvancePayment 
									+ cert.certifiedAdjustmentAmount 
									+ cert.certifiedCPFAmount 
									- cert.certifiedMainContractorRetention 
									- cert.certifiedRetentionforNSCNDSC 
									- cert.certifiedMOSRetention 
									- cert.certifiedContraChargeAmount)
									- previousCertNetAmount
									| currency}}</b>
							</label>	
						</div>
					</div>

					<div class="panel-body">
						<div class="col-md-8">
							<div class="form-group">
								<label class="col-md-4 "></label> <label
									class="text-light-blue col-md-4">IPA</label> <label
									class="text-light-blue col-md-4">IPC</label>
							</div>
							<div class="form-group">
								<label class="col-md-4 control-label">Main Contractor
									Amount</label>
								<div class="col-md-4">
									<div class="input-group">
										 <!-- <span class="input-group-addon">$</span> -->
										<input type="text"
											class="form-control input-sm text-right"
											ng-currency
											ng-model="cert.appliedMainContractorAmount"
											ng-disabled="disableButtons || cert.certificateStatus >= 120">
										<!-- <span class="input-group-addon">.00</span> -->
									</div>
								</div>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											ng-currency class="form-control input-sm text-right"
											ng-model="cert.certifiedMainContractorAmount"
											ng-disabled="disableButtons || cert.certificateStatus >= 150">
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="col-md-4 control-label">+ NSC / NDSC
									Amount</label>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											ng-currency class="form-control input-sm text-right"
											ng-model="cert.appliedNSCNDSCAmount"
											ng-disabled="disableButtons || cert.certificateStatus >= 120">
									</div>
								</div>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											ng-currency class="form-control input-sm text-right"
											ng-model="cert.certifiedNSCNDSCAmount"
											ng-disabled="disableButtons  || cert.certificateStatus >= 150">
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="col-md-4 control-label">+ MOS Amount</label>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											ng-currency class="form-control input-sm text-right"
											ng-model="cert.appliedMOSAmount" 
											ng-disabled="disableButtons || cert.certificateStatus >= 120">
									</div>
								</div>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											ng-currency class="form-control input-sm text-right"
											ng-model="cert.certifiedMOSAmount"
											ng-disabled="disableButton || cert.certificateStatus >= 150">
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="col-md-4 control-label">+ Main Contractor
									Retention Released</label>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											ng-currency class="form-control input-sm text-right"
											ng-model="cert.appliedMainContractorRetentionReleased"
											ng-disabled="disableButtons || cert.certificateStatus >= 120">
									</div>
								</div>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											ng-currency class="form-control input-sm text-right"
											ng-model="cert.certifiedMainContractorRetentionReleased"
											ng-disabled="disableButtons|| cert.certificateStatus >= 150 ">
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="col-md-4 control-label">+ Retention for
									NSC / NDSC Released</label>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											ng-currency class="form-control input-sm text-right"
											ng-model="cert.appliedRetentionforNSCNDSCReleased"
											ng-disabled="disableButtons || cert.certificateStatus >= 120">
									</div>
								</div>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											ng-currency class="form-control input-sm text-right"
											ng-model="cert.certifiedRetentionforNSCNDSCReleased"
											ng-disabled="disableButtons || cert.certificateStatus >= 150">
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="col-md-4 control-label">+ MOS Retention
									Released</label>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											ng-currency class="form-control input-sm text-right"
											ng-model="cert.appliedMOSRetentionReleased"
											ng-disabled="disableButtons || cert.certificateStatus >= 120">
									</div>
								</div>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											ng-currency class="form-control input-sm text-right"
											ng-model="cert.certifiedMOSRetentionReleased"
											ng-disabled="disableButtons || cert.certificateStatus >= 150">
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="col-md-4 control-label">+ Adjustment
									Amount</label>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											ng-currency class="form-control input-sm text-right"
											ng-model="cert.appliedAdjustmentAmount"
											ng-disabled="disableButtons || cert.certificateStatus >= 120">
									</div>
								</div>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											ng-currency class="form-control input-sm text-right"
											ng-model="cert.certifiedAdjustmentAmount"
											ng-disabled="disableButtons || cert.certificateStatus >= 150">
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="col-md-4 control-label">+ Advance Payment</label>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											ng-currency class="form-control input-sm text-right"
											ng-model="cert.appliedAdvancePayment"
											ng-disabled="disableButtons || cert.certificateStatus >= 120">
									</div>
								</div>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											ng-currency class="form-control input-sm text-right"
											ng-model="cert.certifiedAdvancePayment"
											ng-disabled="disableButtons || cert.certificateStatus >= 150">
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="col-md-4 control-label">+ CPF Amount</label>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											ng-currency class="form-control input-sm text-right"
											ng-model="cert.appliedCPFAmount" 
											ng-disabled="disableButtons || cert.certificateStatus >= 120">
									</div>
								</div>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											ng-currency
											class="form-control input-sm text-right text-right"
											ng-model="cert.certifiedCPFAmount"
											ng-disabled="disableButtons || cert.certificateStatus >= 150">
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="col-md-4 control-label text-red">- Main
									Contractor Retention</label>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											class="form-control input-sm text-right text-right"
											ng-currency ng-model="cert.appliedMainContractorRetention"
											ng-disabled="disableButtons || cert.certificateStatus >= 120">
									</div>
								</div>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											ng-currency class="form-control input-sm text-right"
											ng-model="cert.certifiedMainContractorRetention"
											ng-disabled="disableButtons || cert.certificateStatus >= 150">
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="col-md-4 control-label text-red">-
									Retention for NSC / NDSC</label>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											ng-currency class="form-control input-sm text-right"
											ng-model="cert.appliedRetentionforNSCNDSC"
											ng-disabled="disableButtons || cert.certificateStatus >= 120">
									</div>
								</div>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											ng-currency class="form-control input-sm text-right"
											ng-model="cert.certifiedRetentionforNSCNDSC"
											ng-disabled="disableButtons || cert.certificateStatus >= 150">
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="col-md-4 control-label text-red">- MOS
									Retention</label>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											ng-currency class="form-control input-sm text-right"
											ng-model="cert.appliedMOSRetention"
											ng-disabled="disableButtons || cert.certificateStatus >= 120">
									</div>
								</div>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											ng-currency class="form-control input-sm text-right"
											ng-model="cert.certifiedMOSRetention"
											ng-disabled="disableButtons || cert.certificateStatus >= 150">
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="col-md-4 control-label text-red">- Contra
									Charge Amount</label>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											ng-currency class="form-control input-sm text-right"
											ng-model="cert.appliedContraChargeAmount"
											ng-disabled="disableButtons || cert.certificateStatus >= 120">
									</div>
								</div>
								<div class="col-md-4">
									<div class="input-group">
										 <input type="text"
											class="form-control input-sm text-right"
											ng-click="editContraCharge()"
											value="{{cert.certifiedContraChargeAmount | currency}}"
											ng-disabled="disableButtons || cert.certificateStatus >= 150">
									</div>
								</div>

							</div>

						</div>

						<div class="col-md-4">
							<!-- GST -->
							<div class="col-md-12" ng-show="jobNo.indexOf('14')>-1">
								<div class="box box-primary">
									<div class="box-body">
										<div class="row">
											<div class="form-group col-md-6">
												<label>GST Amount (Receivable)</label>
												<div class="input-group">
													 <input type="text"
														ng-currency class="form-control input-sm text-right"
														ng-model="cert.gstReceivable"
														ng-disabled="disableButtons || cert.certificateStatus >= 150">
												</div>
											</div>
											<div class="form-group col-md-6">
												<label>GST Contra Charge (Payable)</label>
												<div class="input-group">
													 <input type="text"
														ng-currency class="form-control input-sm text-right"
														ng-model="cert.gstPayable"
														ng-disabled="disableButtons || cert.certificateStatus >= 150">
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>

							<!-- Date  -->
							<div class="col-md-12">
								<div class="box box-primary">
									<div class="box-body">
										<div class="row">
											<div class="col-md-6">
												<div class="form-group">
													<label>IPA Submission Date:</label>
													
													<div class="input-group"
														moment-picker="cert.ipaSubmissionDate"
														format="{{GlobalParameter.MOMENT_DATE_FORMAT}}"
														start-view="day"
														ng-model-options="{ updateOn: 'blur' }">
														<span class="input-group-addon"> <i
															class="fa fa-calendar"></i>
														</span> <input class="form-control"
															ng-model="cert.ipaSubmissionDate" timestamp-to-string="{{GlobalParameter.DATE_FORMAT}}"
															ng-disabled="disableButtons || cert.certificateStatus >= 120"
															data-parsley-required>

													</div>
												</div>
											</div>
											<div class="col-md-6">
												<div class="form-group">
													<label>Certificate Issue Date:</label>
													<div class="input-group" 
														moment-picker="cert.certIssueDate"
														format="{{GlobalParameter.MOMENT_DATE_FORMAT}}"
														start-view="day" 
														ng-model-options="{ updateOn: 'blur' }">
														<span class="input-group-addon"> <i
															class="fa fa-calendar"></i>
														</span> <input class="form-control" 
															ng-model="cert.certIssueDate" timestamp-to-string="{{GlobalParameter.DATE_FORMAT}}"
															ng-disabled="disableButtons || cert.certificateStatus >= 150"
															data-parsley-required>

													</div>
												</div>
											</div>

											<div class="col-md-6">
												<div class="form-group">
													<label> Certificate As At Date:</label>
													<div class="input-group" moment-picker="cert.certAsAtDate"
														start-view="day" format="{{GlobalParameter.MOMENT_DATE_FORMAT}}"
														ng-model-options="{ updateOn: 'blur' }">
														<span class="input-group-addon"> <i
															class="fa fa-calendar"></i>
														</span> <input class="form-control" ng-model="cert.certAsAtDate" timestamp-to-string="{{GlobalParameter.DATE_FORMAT}}"
															ng-disabled="disableButtons || cert.certificateStatus >= 150"
															data-parsley-required>

													</div>
												</div>
											</div>
											<div class="col-md-6">
												<div class="form-group">
													<label>Certificate Due Date:</label>
													<div class="input-group" moment-picker="cert.certDueDate"
														start-view="day" format="{{GlobalParameter.MOMENT_DATE_FORMAT}}"
														ng-model-options="{ updateOn: 'blur' }">
														<span class="input-group-addon"> <i
															class="fa fa-calendar"></i>
														</span> <input class="form-control" ng-model="cert.certDueDate" timestamp-to-string="{{GlobalParameter.DATE_FORMAT}}"
															ng-disabled="disableButtons || cert.certificateStatus >= 150"
															data-parsley-required>

													</div>
												</div>
											</div>
											<div class="col-md-6" ng-show="disableButtons">
												<div class="form-group">
													<label>Actual Receipt Date:</label>
													<div class="input-group"
														moment-picker="cert.actualReceiptDate"
														start-view="day" format="{{GlobalParameter.MOMENT_DATE_FORMAT}}"
														ng-model-options="{ updateOn: 'blur' }">
														<span class="input-group-addon"> <i
															class="fa fa-calendar"></i>
														</span> <input class="form-control" timestamp-to-string="{{GlobalParameter.DATE_FORMAT}}"
															ng-model="cert.actualReceiptDate"
															disabled>

													</div>
												</div>
											</div>


											<div class="col-md-12">
												<button class="btn btn-warning btn-block" ng-click="openRetentionReleaseSchedule()"
													ng-disabled="disableButtons" ng-hide="disableButtons">
													Retention Release Schedule <i class="fa fa-calendar"></i>
												</button>
											</div>


										</div>
									</div>
								</div>
							</div>

							<!-- Remark -->
							<div class="col-md-12">
								<div class="box box-primary">
									<div class="box-body">
										<div class="form-group">
											<label>Remark</label>
											<textarea class="form-control" rows="2"
												ng-model="cert.remark" ng-style="{height: 50 + 'px'}"
												ng-disabled="disableButtons || cert.certificateStatus >= 150"></textarea>
										</div>
									</div>
								</div>
							</div>
						</div>

					</div>
					<div class="panel-footer bg-white">
						<div class="row">
							<div class=" col-md-6">
								<button class="btn btn-primary btn-block" ui-sref="cert.details">
									Attachment <i class="fa fa-file-text"></i>
								</button>
							</div>
							<div class=" col-md-6">
								<button class="btn btn-primary btn-block" ui-sref="cert.details"
									ng-disabled="disableButtons" ng-hide="disableButtons"
									ng-click="save()">
									Save <i class="fa fa-floppy-o"></i>
								</button>

							</div>
						</div>
					</div>


				</div>
			</div>


		</div>
	</form>
</div>