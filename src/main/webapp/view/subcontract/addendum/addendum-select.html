<div id="content" class="content">
	<ol class="breadcrumb pull-right">
		<li><a ui-sref="job.dashboard"><i class="fa fa-dashboard"></i>
				Home</a></li>
		<li class="active">Dashboard</li>
	</ol>

	<h1 class="page-header">
		{{jobNo}}<small> {{jobDescription}}</small> - Subcontract {{subcontractNo}}<small> {{subcontractDescription}}
		<small class="text-red m-l-30" ng-show="paymentStatus == 'F'"> <b>Final</b></small>
	</h1>

	<div class="col-lg-6">

		<div class="widget widget-stat text-white bg-lime">
			<div class="widget-stat-btn">
				<a href="javascript:;" data-click="widget-reload"><i
					class="fa fa-repeat"></i></a>
			</div>
			<div class="widget-stat-content">
				<div class="widget-stat-title">
					<h4><i class="fa fa-trophy fa-fw"></i> Total Addendum Amount</h4>
				</div>
				<div class="widget-stat-text m-b-10">V1, V2, V3, L1, L2, D1, D2, CF</div>
				<div class="widget-stat-number m-b-10">{{totalAddendumAmount | currency}}</div>
				<div class="widget-stat-chart">
					<div id="sparkline-line-chart"></div>
				</div>
			</div>
		</div>

		<div class="fullcalendar vertical-box ">

			<div class="fullcalendar-container vertical-box-column">
				<div id='calendar'></div>
			</div>
		</div>
	</div>


	<div class="col-lg-6">
		<div class="fixed-container">
			<div class="col-lg-12" id="createAddendumDiv"
				ng-if="latestAddendumStatus=='APPROVED' || latestAddendumStatus==''">
				<a ui-sref="subcontract.addendum.title({addendumNo: 'New'})"
					class="btn btn-danger btn-block"> <i
					class="fa fa-plus-circle fa-2x "></i> Create New Addendum
				</a> <br> <br>
			</div>
			<div class="col-lg-12 animated"
				ng-repeat="addendum in addendums | orderBy:'addendumNo':false">

				<div class="panel"	ng-class="{'panel-grey' : addendum.status=='APPROVED', 'panel-lime' : addendum.status!='APPROVED'}">
					<div class="panel-heading">
						<div class="panel-heading-btn">
							<a href="javascript:;"
								class="btn btn-xs btn-icon btn-circle btn-inverse"
								data-click="panel-collapse"> <i class="fa fa-minus"></i>
							</a>
						</div>
						<h3 class="panel-title">Addendum No. {{addendum.no}}
							- Addendum Amount {{addendum.amtAddendum| currency}}</h3>

					</div>
					<!-- /.box-header -->
					<div class="panel-body"
						ng-style="{display: (addendum.no != maxAddendumNo ? 'none' : 'block')}">

						<div class="row">
							<div class="col-lg-12">
								<div class="pull-right" id="{{addendum.status!='APPROVED' ? 'pendingAddendumViewDetails' : 'AddendumViewDetails'+$index}}">
									<a class="btn" ui-sref="subcontract.addendum.title({addendumNo: addendum.no})" 
									ng-class="{'btn-grey' : addendum.status=='APPROVED', 'btn-lime' : addendum.status!='APPROVED'}">
									View details</a>
								</div>
								<dl class="dl-horizontal">
									<dt>Addendum Status:</dt>
									<dd>
										<div ng-class="{'text-danger' : addendum.status=='APPROVED', 'text-green' : addendum.status!='APPROVED'}">
											<b>{{addendum.status}}</b>
										</div>
									</dd>
									<dt>Approval Status:</dt>
									<dd>
										<div ng-class="{'text-danger' : addendum.status=='APPROVED', 'text-green' : addendum.status!='APPROVED'}">
											<b>{{addendum.statusApproval}}</b>
										</div>
									</dd>
								</dl>
							</div>
						</div>
						<div class="row">
							<div class="col-lg-5">
								<dl class="dl-horizontal">

									<!-- <dt>Created by:</dt> <dd>Koey Yeung</dd> -->
									<dt>Addendum Title</dt>
									<dd>{{addendum.title}}</dd>
									<dt>Submission Date:</dt>
									<dd>{{addendum.dateSubmission | jsonDate : 'ddMMM,yyyy'}}</dd>
									<dt>Approved Date:</dt>
									<dd>{{addendum.dateApproval | jsonDate : 'ddMMM,yyyy'}}</dd>
								</dl>
							</div>
							<div class="col-lg-7">
								<dl class="dl-horizontal">
									<dt>Prepared by:</dt>
									<dd>{{addendum.usernamePreparedBy}}</dd>
								</dl>
							</div>
						</div>
						<div class="row">
							<div class="col-lg-12">
								<dl class="dl-horizontal">
									<dt>Completed:</dt>
									<dd>
										<div class="progress progress-striped  m-b-sm"
										ng-class="{'active' : addendum.status!='APPROVED'}">
											<div class="progress-bar" 
												ng-style="{width: progress_bar(addendum.status)}"
												ng-class="{'progress-bar-grey' : addendum.status=='APPROVED', 'progress-bar-lime' : addendum.status!='APPROVED'}">
											{{progress_bar(addendum.status)}}</div>
										</div>
									</dd>
								</dl>
							</div>
						</div>
					</div>


				</div>

			</div>

		</div>
	</div>

</div>

